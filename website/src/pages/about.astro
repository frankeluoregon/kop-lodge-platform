---
import Base from "../layouts/Base.astro";
import { getConfig, getPage } from "../lib/db";
import { renderMarkdown } from "../lib/markdown";

const db = Astro.locals.runtime.env.DB;
const config = await getConfig(db);
const page = await getPage(db, "about");
---

<Base config={config} title="About Us" description={page?.meta_description ?? undefined}>
  <div class="hero">
    <h1>About Us</h1>
    <p>{config.lodge_name} &mdash; Knights of Pythias</p>
  </div>
  <main>
    {page
      ? <article class="prose" set:html={renderMarkdown(page.content)} />
      : <p style="color:#666">Page content coming soon.</p>
    }
  </main>
</Base>
