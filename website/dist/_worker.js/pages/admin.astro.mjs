globalThis.process ??= {}; globalThis.process.env ??= {};
import { e as createComponent, n as defineStyleVars, g as addAttribute, l as renderHead, r as renderTemplate, h as createAstro } from '../chunks/astro/server_XPN6sfq-.mjs';
import { g as getAdminToken, i as isValidAdminToken } from '../chunks/auth_B4Zu3cps.mjs';
import { g as getConfig, b as getUpcomingEvents, c as getPublishedPosts, d as getOfficers, e as getCommunityService } from '../chunks/db_DFm1mHTU.mjs';
/* empty css                                 */
export { renderers } from '../renderers.mjs';

const $$Astro = createAstro();
const $$Index = createComponent(async ($$result, $$props, $$slots) => {
  const Astro2 = $$result.createAstro($$Astro, $$props, $$slots);
  Astro2.self = $$Index;
  const { DB, ADMIN_TOKEN_HASH } = Astro2.locals.runtime.env;
  const token = getAdminToken(Astro2.request);
  const authed = await isValidAdminToken(token ?? "", ADMIN_TOKEN_HASH ?? "");
  if (!authed) return Astro2.redirect("/admin/login", 302);
  const config = await getConfig(DB);
  const events = await getUpcomingEvents(DB, void 0, 5);
  const posts = await getPublishedPosts(DB, 5);
  const officers = await getOfficers(DB);
  const service = await getCommunityService(DB, false, 5);
  const primary = config.primary_color || "#4B0082";
  const accent = config.accent_color || "#FFD700";
  const $$definedVars = defineStyleVars([{ primary, accent }]);
  return renderTemplate`<html lang="en" data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Admin â€“ ${config.lodge_name}</title>${renderHead()}</head> <body data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}> <div class="topbar" data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}> <span class="brand" data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>${config.lodge_name} &mdash; Admin</span> <nav data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}> <a href="/" data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>View Site</a> <a href="/admin/config" data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>Site Settings</a> <a href="/admin/logout" class="logout" data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>Log out</a> </nav> </div> <main data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}> <h1 data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>Dashboard</h1> <div class="grid" data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}> <!-- Config summary --> <div class="panel" data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}> <h2 data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>Lodge Settings</h2> <div class="config-grid" data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}> <span class="config-key" data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>Name</span><span data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>${config.lodge_name}</span> <span class="config-key" data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>Number</span><span data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>${config.lodge_number}</span> <span class="config-key" data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>City</span><span data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>${config.city}</span> <span class="config-key" data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>State</span><span data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>${config.state}</span> <span class="config-key" data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>Meetings</span><span data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>${config.meeting_schedule}</span> </div> <a class="btn add" href="/admin/config" data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>Edit Settings</a> </div> <!-- Events --> <div class="panel" data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}> <h2 data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>Upcoming Events</h2> ${events.length === 0 ? renderTemplate`<p${addAttribute(`${"font-size:.85rem;color:#666"}; ${$$definedVars}`, "style")} data-astro-cid-u2h3djql>No upcoming events.</p>` : renderTemplate`<ul data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}> ${events.map((ev) => renderTemplate`<li data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}> <span data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>${ev.event_date.slice(0, 10)} &mdash; ${ev.title}</span> <div class="actions" data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}> <a class="btn"${addAttribute(`/admin/events/edit?id=${ev.id}`, "href")} data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>Edit</a> </div> </li>`)} </ul>`} <a class="btn add" href="/admin/events/new" data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>+ Add Event</a> </div> <!-- Officers --> <div class="panel" data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}> <h2 data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>Officers</h2> ${officers.length === 0 ? renderTemplate`<p${addAttribute(`${"font-size:.85rem;color:#666"}; ${$$definedVars}`, "style")} data-astro-cid-u2h3djql>No officers listed.</p>` : renderTemplate`<ul data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}> ${officers.map((o) => renderTemplate`<li data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}> <span data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>${o.title} &mdash; ${o.name}</span> <div class="actions" data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}> <a class="btn"${addAttribute(`/admin/officers/edit?id=${o.id}`, "href")} data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>Edit</a> </div> </li>`)} </ul>`} <a class="btn add" href="/admin/officers/new" data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>+ Add Officer</a> </div> <!-- Blog --> <div class="panel" data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}> <h2 data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>Blog Posts</h2> ${posts.length === 0 ? renderTemplate`<p${addAttribute(`${"font-size:.85rem;color:#666"}; ${$$definedVars}`, "style")} data-astro-cid-u2h3djql>No posts yet.</p>` : renderTemplate`<ul data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}> ${posts.map((p) => renderTemplate`<li data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}> <span data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>${p.title}</span> <div class="actions" data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}> <a class="btn"${addAttribute(`/admin/blog/edit?id=${p.id}`, "href")} data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>Edit</a> <a class="btn"${addAttribute(`/blog/${p.slug}`, "href")} target="_blank" data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>View</a> </div> </li>`)} </ul>`} <a class="btn add" href="/admin/blog/new" data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>+ New Post</a> </div> <!-- Community Service --> <div class="panel" data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}> <h2 data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>Community Service</h2> ${service.length === 0 ? renderTemplate`<p${addAttribute(`${"font-size:.85rem;color:#666"}; ${$$definedVars}`, "style")} data-astro-cid-u2h3djql>No entries yet.</p>` : renderTemplate`<ul data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}> ${service.map((cs) => renderTemplate`<li data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}> <span data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>${cs.title}</span> <div class="actions" data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}> <a class="btn"${addAttribute(`/admin/service/edit?id=${cs.id}`, "href")} data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>Edit</a> </div> </li>`)} </ul>`} <a class="btn add" href="/admin/service/new" data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>+ Add Entry</a> </div> <!-- Pages --> <div class="panel" data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}> <h2 data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>Pages</h2> <ul data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}> <li data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}><span data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>About Us</span><div class="actions" data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}><a class="btn" href="/admin/pages/edit?slug=about" data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>Edit</a></div></li> <li data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}><span data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>Contact</span><div class="actions" data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}><a class="btn" href="/admin/pages/edit?slug=contact" data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>Edit</a></div></li> </ul> <a class="btn add" href="/admin/pages/new" data-astro-cid-u2h3djql${addAttribute($$definedVars, "style")}>+ New Page</a> </div> </div> </main> </body></html>`;
}, "C:/Users/frankel/kop-lodge-platform/website/src/pages/admin/index.astro", void 0);

const $$file = "C:/Users/frankel/kop-lodge-platform/website/src/pages/admin/index.astro";
const $$url = "/admin";

const _page = /*#__PURE__*/Object.freeze(/*#__PURE__*/Object.defineProperty({
  __proto__: null,
  default: $$Index,
  file: $$file,
  url: $$url
}, Symbol.toStringTag, { value: 'Module' }));

const page = () => _page;

export { page };
